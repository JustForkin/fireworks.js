<!doctype html><title>Example of firework.js</title>
<script src="../vendor/tquery-bundle.js"></script>

<script src="../../src/core.js"></script>
<script src="../../src/emitter.js"></script>
<script src="../../src/particle.js"></script>
<script src="../../src/effect.js"></script>
<script src="../../src/spawner.js"></script>
<script src="../../src/shape.js"></script>
<script src="../../src/vector.js"></script>


<script src="../plugins/spawner.rate.js"></script>
<script src="../plugins/shape.box.js"></script>
<script src="../plugins/shape.sphere.js"></script>
<script src="../plugins/shape.point.js"></script>

<script src="./effect.friction.js"></script>
<script src="./effect.lifetime.js"></script>
<script src="./effect.position.js"></script>
<script src="./effect.randomvelocitydrift.js"></script>
<script src="./effect.rendertocanvas.js"></script>
<script src="./effect.rendertothreejsobject3d.js"></script>
<script src="./effect.rendertothreejsparticlesystem.js"></script>
<script src="./effect.velocity.js"></script>

<body><script>
	var world	= tQuery.createWorld().boilerplate().start();
	var object	= tQuery.createTorus().addTo(world);

	world.renderer().setClearColorHex( 0x000000, world.renderer().getClearAlpha() );

	var nParticles	= 400;

	var geometry	= new THREE.Geometry();
	for( var i = 0; i < nParticles; i++ ){
		var vertex	= new THREE.Vector3();
		// make vertex invisible
		vertex.x	= vertex.y = vertex.z = Infinity;
		geometry.vertices.push( vertex );
		// set the THREE.VertexColors,
		var color	= new THREE.Color( 0xFFFFFF*Math.random() );
		geometry.colors.push( color );
	}
	var material	= new THREE.ParticleBasicMaterial({
		color		: 0xFFFFFF,
		vertexColors	: THREE.VertexColors,
		size		: 3,
		sizeAttenuation	: false
	});
	var particleSystem		= new THREE.ParticleSystem(geometry, material);
	particleSystem.dynamic		= true;
	particleSystem.sortParticles	= true;
	world.add(particleSystem);


	var emitter	= Fireworks.createEmitter({nParticles : nParticles})
		.useSpawnerSteadyRate(20)
		.effectsStackBuilder()
			.position(Fireworks.createShapeSphere(0, 0, 0, 0.5))
			.velocity(Fireworks.createShapeSphere(0, 0, 0, 3))
			.friction(0.85)
			.lifeTime(0.5, 1.5)
			.renderToThreejsParticleSystem({
				particleSystem	: particleSystem
			}).back()
		.start();

	world.loop().hook(function(delta, now){
		emitter.update(delta).render();
	})
</script></body>











