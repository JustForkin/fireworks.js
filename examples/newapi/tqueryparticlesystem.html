<!doctype html><title>Example of firework.js</title>
<script src="../vendor/tquery-bundle.js"></script>

<script src="../../src/core.js"></script>
<script src="../../src/emitter.js"></script>
<script src="../../src/particle.js"></script>
<script src="../../src/effect.js"></script>
<script src="../../src/spawner.js"></script>
<script src="../../src/shape.js"></script>
<script src="../../src/vector.js"></script>


<script src="../plugins/spawner.rate.js"></script>
<script src="../plugins/shape.box.js"></script>
<script src="../plugins/shape.sphere.js"></script>
<script src="../plugins/shape.point.js"></script>

<script src="./effect.friction.js"></script>
<script src="./effect.lifetime.js"></script>
<script src="./effect.position.js"></script>
<script src="./effect.randomvelocitydrift.js"></script>
<script src="./effect.rendertocanvas.js"></script>
<script src="./effect.rendertothreejsobject3d.js"></script>
<script src="./effect.rendertothreejsparticlesystem.js"></script>
<script src="./effect.velocity.js"></script>

<body><script>
	var world	= tQuery.createWorld().boilerplate().start();
	world.renderer().setClearColorHex( 0x000000, world.renderer().getClearAlpha() );

	// create the emitter
	var emitter	= Fireworks.createEmitter({nParticles : 400})
		.useSpawnerSteadyRate(10)
		.effectsStackBuilder()
			.position(Fireworks.createShapeSphere(0, 0, 0, 0.1))
			.velocity(Fireworks.createShapePoint(0, 0, 0))
			.createEffect('radialVelocity', {
					minSpeed	: 2,
					maxSpeed	: 4	
				}).onBirth(function(particle, deltaTime){
					var position	= particle.get('position').vector;
					var velocity	= particle.get('velocity').vector;
					var length	= this.opts.minSpeed + (this.opts.maxSpeed - this.opts.minSpeed)*Math.random();
					velocity.copy(position).setLength(length);
				}).back()
			.friction(0.999)
			.lifeTime(2, 2)
			.renderToThreejsParticleSystem({
				create	: function(emitter){
					var geometry	= new THREE.Geometry();
					for( var i = 0; i < emitter.nParticles(); i++ ){
						var vertex	= new THREE.Vector3();
						geometry.vertices.push( vertex );
					}
					var url		= "../assets/images/tremulous/psaw/blue_particle.jpg";
					var texture	= THREE.ImageUtils.loadTexture( url );
					var material	= new THREE.ParticleBasicMaterial({
						blending	: THREE.AdditiveBlending,
						transparent	: true,
						size		: 1,
						map		: texture,
						sizeAttenuation	: true
					});
					var particleSystem		= new THREE.ParticleSystem(geometry, material);
					particleSystem.dynamic		= true;
					particleSystem.sortParticles	= true;
					world.add(particleSystem);
					return particleSystem;
				}
			}).back()
		.start();

	world.loop().hook(function(delta, now){
		emitter.update(delta).render();
	})
</script></body>











